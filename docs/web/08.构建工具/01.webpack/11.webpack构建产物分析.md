# webpack 构建产物分析

## 示例

定义如下文件:

- `src/main.js`
- `src/a.js`
- `src/b.js`
- `src/c.js`



```js
// 同步方式引入资源
import {logA} from './custom-loaders/custom-inline-loader.js??share-opts!./a?c=d'

function logAB() {
    logA();
    // 异步方式引入资源
    import(/* webpackChunkName: "ChunkB", webpackPrefetch: true */ './b').then(asyncModule => asyncModule.logB())
}

logAB()
```

```js
// src/a.js
import {logC} from './c'

export function logA() {
    logC()
    console.log('A')
}

export const A = 'A'
```

```js
// src/b.js
export function logB() {
    console.log('B')
}
```

```js
// src/c.js
export function logC() {
    console.log('C')
}
```


依赖关系如下:

1. 同步: `main -> a -> c`
2. 异步: `main -> b`


## 构建日志

执行 webpack build 之后，这个日志的输出由webpack/lib/Stats.js生成。

![alt text](image-4.png)

日志分析:

### 第一部分

下面这些信息都是从 `compilation.asstes` 中获取。

- Asset
- Size
- Chunks
- Chunk Name

输出的产物 chunk，主要分成三部分: `chunkMain`,`chunkB`,`runtimeChunk`

### 第二部分

Entrypoint 决定了输出产物的，包含异步加载的 ChunkB.js

### 第三部分