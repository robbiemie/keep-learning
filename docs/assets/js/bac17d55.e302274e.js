"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[8251],{5648:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"web/\u7f16\u7801/\u6df1\u62f7\u8d1d","title":"\u6df1\u62f7\u8d1d","description":"\u9700\u8981\u8003\u8651\u73af\u5f62\u4f9d\u8d56\u95ee\u9898","source":"@site/markdown/web/04.\u7f16\u7801/05.\u6df1\u62f7\u8d1d.md","sourceDirName":"web/04.\u7f16\u7801","slug":"/web/\u7f16\u7801/\u6df1\u62f7\u8d1d","permalink":"/docs/docs/web/\u7f16\u7801/\u6df1\u62f7\u8d1d","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Promise.allsettled","permalink":"/docs/docs/web/\u7f16\u7801/Promise.allsettled"},"next":{"title":"DNS","permalink":"/docs/docs/web/\u7f51\u7edc/DNS"}}');var r=t(4848),l=t(8453);const a={},c="\u6df1\u62f7\u8d1d",s={},i=[{value:"\u8fdb\u9636\u7248",id:"\u8fdb\u9636\u7248",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u6df1\u62f7\u8d1d",children:"\u6df1\u62f7\u8d1d"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u9700\u8981\u8003\u8651\u73af\u5f62\u4f9d\u8d56\u95ee\u9898"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function cloneDeep(value) {\n  function clone(target, map) {\n    if(target === null) return null;\n    if(typeof target === 'object') {\n      let cloneTarget = Array.isArray(target) ? [] : {}\n      if(map.get(target)) {\n        return map.get(target);\n      }\n      map.set(target, cloneTarget);\n      for(let key in target) {\n        // \u5bf9\u8c61\u7c7b\u578b\n        cloneTarget[key] = clone(target[key], map);\n      }\n      return cloneTarget;\n    } else {\n      // \u57fa\u7840\u7c7b\u578b\n      return target\n    }\n\n  }\n\n  return clone(value, new WeakMap())\n}\n\nlet obj = {\n  a: 1,\n  b: {\n    c: 2\n  },\n  d: [{e: '3'}, '4']\n}\nobj.e = obj\n\nconsole.log(cloneDeep(obj));\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u8fdb\u9636\u7248",children:"\u8fdb\u9636\u7248"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function cloneDeep(value) {\n  function isObject(value) {\n    return value !== null && (typeof value === 'object')\n  }\n  function isFunction() { return typeof value === 'function' }\n  function cloneFunction(value) {\n    const clone = value.bind({});\n    for(key in value) {\n      clone[key] = value[key]\n    }\n    clone.prototype = Object.create(value.prototype)\n    return clone;\n  }\n  function isRegExp(value) { return value instanceof RegExp }\n  function cloneRegExp(value) {\n    if(value instanceof RegExp) {\n      const reg = new RegExp(value.source, value.flags);\n      reg.lastIndex = value.lastIndex;\n      return reg;\n    }\n  }\n  function clone(target, map) {\n    if(isObject(target)) {\n      // \u6b63\u5219\n      if(isRegExp(target)) return cloneRegExp(target);\n      // \u51fd\u6570\n      if(isFunction(target)) return cloneFunction(target);\n      let cloneTarget = Array.isArray(target) ? [] : {}\n      if(map.get(target)) {\n        return map.get(target);\n      }\n      map.set(target, cloneTarget);\n      for(let key in target) {\n        // \u5bf9\u8c61\u7c7b\u578b\n        cloneTarget[key] = clone(target[key], map);\n      }\n      return cloneTarget;\n    } else {\n      // \u57fa\u7840\u7c7b\u578b\n      return target\n    }\n\n  }\n  return clone(value, new WeakMap())\n}\n\nlet obj = {\n  a: 1,\n  b: {\n    c: 2\n  },\n  d: [{e: '3'}, '4']\n}\nobj.e = obj\n\n// console.log(cloneDeep(obj), cloneDeep.toString());\n\n// const originalRegExp = /hello\\d/ig;\n// console.log(isRegExp(originalRegExp)); // true\n// console.log(originalRegExp.source); // hello\\d\n// console.log(originalRegExp.flags); // ig\n\nconst source = cloneDeep.toString();\nconst fn = new Function(source)\nconsole.log(fn(obj))\n"})})]})}function g(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var o=t(6540);const r={},l=o.createContext(r);function a(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);