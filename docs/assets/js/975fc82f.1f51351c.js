"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[6411],{4743:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"web/react/redux/redux","title":"Redux","description":"Redux \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u5e94\u7528\u72b6\u6001\u7684\u5e93\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u590d\u6742\u7684\u7528\u6237\u754c\u9762\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u9884\u6d4b\u7684\u72b6\u6001\u7ba1\u7406\u5bb9\u5668\uff0c\u4f7f\u5f97\u72b6\u6001\u7684\u66f4\u65b0\u903b\u8f91\u96c6\u4e2d\u4e8e\u4e00\u5904\uff0c\u4fbf\u4e8e\u8ffd\u8e2a\u72b6\u6001\u53d8\u5316\u548c\u7ba1\u7406\u5e94\u7528\u72b6\u6001\u3002","source":"@site/markdown/web/12.react/redux/01.redux.md","sourceDirName":"web/12.react/redux","slug":"/web/react/redux/redux","permalink":"/docs/docs/web/react/redux/redux","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"setState","permalink":"/docs/docs/web/react/setState"},"next":{"title":"redux \u6570\u636e\u6d41\u8f6c\u56fe","permalink":"/docs/docs/web/react/redux/redux\u6570\u636e\u6d41\u8f6c\u56fe"}}');var r=t(4848),c=t(8453);const i={},d="Redux",a={},o=[{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b",level:2},{value:"\u4e3a\u4ec0\u4e48\u4f7f\u7528 Redux",id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528-redux",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"redux",children:"Redux"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Redux \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u5e94\u7528\u72b6\u6001\u7684\u5e93\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u590d\u6742\u7684\u7528\u6237\u754c\u9762\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ef\u9884\u6d4b\u7684\u72b6\u6001\u7ba1\u7406\u5bb9\u5668\uff0c\u4f7f\u5f97\u72b6\u6001\u7684\u66f4\u65b0\u903b\u8f91\u96c6\u4e2d\u4e8e\u4e00\u5904\uff0c\u4fbf\u4e8e\u8ffd\u8e2a\u72b6\u6001\u53d8\u5316\u548c\u7ba1\u7406\u5e94\u7528\u72b6\u6001\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Redux \u4e3b\u8981\u901a\u8fc7\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u6982\u5ff5\u6765\u5b9e\u73b0\u72b6\u6001\u7ba1\u7406\uff1a"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Alt text",src:t(9686).A+"",width:"653",height:"78"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Actions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Actions \u662f\u628a\u6570\u636e\u4ece\u5e94\u7528\u4f20\u5230 store \u7684\u6709\u6548\u8f7d\u8377\u3002\u5b83\u4eec\u662f store \u6570\u636e\u7684\u552f\u4e00\u6765\u6e90\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u4f60\u4f1a\u901a\u8fc7 store.dispatch() \u5c06 action \u4f20\u5230 store\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u4e2a action \u662f\u4e00\u4e2a\u666e\u901a\u7684 JavaScript \u5bf9\u8c61\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a type \u5c5e\u6027\u6765\u6307\u793a\u53d1\u751f\u4e86\u4ec0\u4e48\u7c7b\u578b\u7684\u64cd\u4f5c\u3002\u6839\u636e\u8fd9\u4e2a\u7c7b\u578b\uff0creducers \u53ef\u4ee5\u7406\u89e3\u5982\u4f55\u5904\u7406\u8fd9\u4e2a action\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{\n  type: 'ADD_TODO',\n  text: 'Build my first Redux app'\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Reducers"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"action \u7ecf\u8fc7 reducer \uff0c\u627e\u5230\u5bf9\u5e94\u7684 type, \u66f4\u65b0\u5bf9\u5e94\u7684 state"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Reducers \u6307\u5b9a\u4e86\u5e94\u7528\u72b6\u6001\u7684\u53d8\u5316\u5982\u4f55\u54cd\u5e94 actions \u5e76\u53d1\u9001\u5230 store \u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u8bb0\u4f4f actions \u53ea\u662f\u63cf\u8ff0\u4e86\u6709\u4e8b\u60c5\u53d1\u751f\u4e86\u8fd9\u4e00\u4e8b\u5b9e\uff0c\u5e76\u6ca1\u6709\u63cf\u8ff0\u5e94\u7528\u5982\u4f55\u66f4\u65b0 state\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Reducer \u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u63a5\u6536\u65e7\u7684 state \u548c\u4e00\u4e2a action\uff0c\u8fd4\u56de\u65b0\u7684 state\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function todoApp(state = initialState, action) {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return Object.assign({}, state, {\n        todos: [...state.todos, action.text]\n      });\n    default:\n      return state;\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Store"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Store \u5c06 actions \u548c reducers \u8054\u7cfb\u5230\u4e00\u8d77\u3002\u5b83\u6709\u4ee5\u4e0b\u804c\u8d23\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"\u7ef4\u6301\u5e94\u7528\u7684 state\uff1b\n\u63d0\u4f9b getState() \u65b9\u6cd5\u83b7\u53d6 state\uff1b\n\u63d0\u4f9b dispatch(action) \u65b9\u6cd5\u66f4\u65b0 state\uff1b\n\u901a\u8fc7 subscribe(listener) \u6ce8\u518c\u76d1\u542c\u5668\u3002"}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Dispatch"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u7ec4\u4ef6\u901a\u8fc7 dispatch ,\u53bb\u901a\u77e5 redux \uff0cstore\u9700\u8981\u66f4\u65b0"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5de5\u4f5c\u6d41\u7a0b",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7 button \u70b9\u51fb\u4e8b\u4ef6\uff0c\u89e6\u53d1 dispatch"}),"\n",(0,r.jsx)(n.li,{children:"reducer \u63a5\u53d7\u5230 dispatch \u53d1\u9001\u7684 action.type \u66f4\u65b0 state"}),"\n",(0,r.jsx)(n.li,{children:"state \u53d8\u66f4\u4e4b\u540e\uff0c\u9a71\u52a8\u89c6\u56fe\u66f4\u65b0"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"dispatch(action)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u7ec4\u4ef6\u901a\u8fc7 dispatch ,\u53bb\u901a\u77e5 redux \uff0cstore\u9700\u8981\u66f4\u65b0"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"reducer -> \u8fd4\u56de newState"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"action \u7ecf\u8fc7 reducer \uff0c\u627e\u5230\u5bf9\u5e94\u7684 type, \u66f4\u65b0\u5bf9\u5e94\u7684 state"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"subscribe -> \u89c6\u56fe\u66f4\u65b0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"state \u66f4\u65b0\u4e4b\u540e\uff0c\u7ec4\u4ef6\u8ba2\u9605\u5230 state \u53d8\u66f4\u4e4b\u540e\uff0c\u5f00\u59cb\u9a71\u52a8\u89c6\u56fe\u66f4\u65b0"}),"\n",(0,r.jsx)(n.p,{children:"mapStateToProps\u4f1a\u8ba2\u9605Store\uff0c\u6bcf\u5f53state\u66f4\u65b0\u65f6\uff0c\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u91cd\u65b0\u8ba1\u7b97UI\u7ec4\u4ef6\u7684\u53c2\u6570\u6765\u89e6\u53d1UI\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\uff0cconnect\u65b9\u6cd5\u53ef\u4ee5\u7701\u7565mapStateProps\u53c2\u6570\uff0c\u8fd9\u6837UI\u7ec4\u4ef6\u5c31\u4e0d\u4f1a\u8ba2\u9605Store"}),"\n",(0,r.jsx)(n.p,{children:"mapDispatchToProps\u7528\u6765\u904d\u5386 UI \u7ec4\u4ef6\u7684\u53c2\u6570\u5230store.dispatch\u65b9\u6cd5\u7684\u6620\u5c04"}),"\n",(0,r.jsx)(n.h2,{id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528-redux",children:"\u4e3a\u4ec0\u4e48\u4f7f\u7528 Redux"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u96c6\u4e2d\u7ba1\u7406\u72b6\u6001\uff1aRedux \u63d0\u4f9b\u4e86\u4e00\u4e2a\u96c6\u4e2d\u7684\u72b6\u6001\u7ba1\u7406\u65b9\u6848\uff0c\u4fbf\u4e8e\u5e94\u7528\u4e2d\u4e0d\u540c\u7ec4\u4ef6\u95f4\u7684\u72b6\u6001\u5171\u4eab\u548c\u7ba1\u7406\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u9884\u6d4b\u6027\uff1a\u901a\u8fc7\u4f7f\u7528\u7eaf\u51fd\u6570\u6765\u6267\u884c\u4fee\u6539\uff0c\u786e\u4fdd\u4e86\u76f8\u540c\u7684\u8f93\u5165\u5fc5\u5b9a\u8fd4\u56de\u76f8\u540c\u7684\u8f93\u51fa\uff0c\u6613\u4e8e\u6d4b\u8bd5\u548c\u8c03\u8bd5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u7075\u6d3b\u6027\uff1aRedux \u672c\u8eab\u5f88\u5c0f\uff0c\u53ef\u4ee5\u4e0e\u4efb\u4f55 UI \u5c42\u5e93\u4e00\u8d77\u4f7f\u7528\uff0c\u6700\u5e38\u89c1\u7684\u642d\u914d\u662f React\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4ee3\u7801\u6f14\u793a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { createStore } from 'react-redux'\n\n// reducer \u5c31\u662f\u63cf\u8ff0 action \u5982\u4f55\u628a state\n// \u53d8\u6210\u65b0\u7684 state \u7684\u8fc7\u7a0b\nconst reducer = (state, action) => {\n    switch(action.type) {\n        case 'A':\n            return state.count + 1\n        case 'B':\n            return state.count - 1\n        default:\n            return state\n    }\n}\n\n// createStore \u63a5\u6536\u4e00\u4e2a reducer\nconst store = createStore(reducer)\n\n// \u8ba2\u9605\nstore.subscribe(() => {\n    // \u9a71\u52a8\u89c6\u56fe\u66f4\u65b0\n    console.log(store.getStore())\n})\n\n// \u6539\u53d8 store \u7684\u552f\u4e00\u65b9\u5f0f\u5c31\u662f\u901a\u8fc7 dispatch\n// \u4e00\u4e2a action \u53bb\u4fee\u6539 store\nstore.dispatch({\n    type: 'A'\n})\nstore.dispatch({\n    type: 'B'\n})\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var s=t(6540);const r={},c=s.createContext(r);function i(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(c.Provider,{value:n},e.children)}},9686:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/image-90a5fcca2cc857536703c82910f01f7e.png"}}]);