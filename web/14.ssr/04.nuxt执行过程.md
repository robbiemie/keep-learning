# nuxt 执行过程

## 1. 构建过程

当你运行 nuxt build 或启动 Nuxt.js 应用时（如使用 nuxt start 或在开发模式下的 nuxt dev），Nuxt.js 会执行构建过程，这个过程包括以下几个关键步骤：

- 页面和路由的自动生成：基于 pages 目录下的 Vue 文件自动生成应用的路由配置。
- Vue 组件的编译：使用 Vue Loader 编译单文件组件（.vue 文件）。
- 服务端和客户端的打包：使用 Webpack 分别对服务端和客户端的代码进行打包。服务端打包包括生成 Vue SSR 服务器端的 bundle，客户端打包则包括普通的 SPA 资源。
- 静态文件处理：处理并优化静态资源，如图片、CSS 和 JS 文件。

## 2. 服务端渲染

在构建过程完成后，Nuxt.js 使用 Node.js 服务器来处理来自客户端的请求。启动 SSR 服务通常涉及以下几个步骤：

- 请求处理：Nuxt.js 服务器接收到客户端请求后，根据请求的 URL 来确定需要渲染的页面组件。
- 数据预取：对于需要在服务端获取数据的页面组件，Nuxt.js 会执行其 asyncData 或 fetch 方法来预先获取数据。
- 服务器端渲染：使用 Vue Server Renderer 和预先生成的服务端 bundle，将页面组件渲染为 HTML 字符串。这个过程中，Nuxt.js 会将预取的数据和路由状态等上下文信息传递给渲染器。
- HTML 响应：生成的 HTML 字符串被发送回客户端，客户端浏览器接收到 HTML 后开始渲染页面，并加载相应的客户端 JavaScript 代码。客户端的 Vue 应用随后接管页面，使其成为一个完全交互的 SPA。


## 3. 中间件和服务端逻辑

Nuxt.js 允许开发者使用中间件来扩展和自定义服务端的行为。中间件可以在处理请求之前或渲染页面之前执行自定义的服务端逻辑，如用户身份验证、日志记录或请求重定向等。

## 4. 配置和自定义

Nuxt.js 提供了 nuxt.config.js 配置文件，允许开发者自定义构建过程、修改 Webpack 配置、添加插件和模块等。这为开发者提供了高度的灵活性来调整 Nuxt.js 应用的行为和优化。

