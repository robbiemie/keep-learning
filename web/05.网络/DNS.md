# DNS
> DNS（Domain Name System）是一种用于将域名解析为 IP 地址的分布式命名系统。

当用户在浏览器中输入一个域名（例如 www.example.com）时,其工作原理可以简单概括为以下几个步骤：

1. 域名解析请求： 浏览器首先会向**本地 DNS 服务器**发送一个域名解析请求。
2. 本地 DNS 服务器查询： 本地 DNS 服务器是 **ISP（Internet Service Provider，互联网服务提供商）或者其他公共 DNS 服务器**，它负责接收和处理用户的域名解析请求。本地 DNS 服务器会先查询本地 DNS 缓存，如果缓存中存在相应的解析结果，则直接返回给用户。
3. 递归查询： 如果本地 DNS 缓存中没有找到对应的解析结果，本地 DNS 服务器会进行递归查询。它首先向**根域名服务器**发送一个请求，询问根域名服务器关于顶级域（如 .com、.net、.org）的信息。
4. 迭代查询： 根域名服务器收到请求后，会返回给本地 DNS 服务器一个包含顶级域的信息的响应。本地 DNS 服务器根据返回的顶级域信息，向**顶级域名服务器**发送另一个请求，询问该域名的权威域名服务器的地址。
5. 权威查询： 顶级域名服务器收到请求后，会返回给本地 DNS 服务器一个包含权威域名服务器的地址的响应。本地 DNS 服务器根据返回的权威域名服务器地址，向**权威域名服务器**发送另一个请求，询问该域名的 IP 地址。
6. 响应返回： 权威域名服务器收到请求后，会返回给本地 DNS 服务器一个**包含域名对应的 IP 地址**的响应。本地 DNS 服务器将收到的响应保存到本地缓存中，并将解析结果返回给用户。
7. 缓存处理： 本地 DNS 服务器将收到的解析结果保存到本地缓存中，以便下次相同域名的解析请求可以直接从缓存中获取，提高解析速度和效率。


## DNS 未命中

1. 返回 NXDOMAIN（不存在的域名）错误： 如果根域名服务器、顶级域名服务器或权威域名服务器在查询过程中发现域名不存在（即无法找到对应的 IP 地址），它们会向本地 DNS 服务器返回一个 NXDOMAIN 错误响应。本地 DNS 服务器将此错误响应返回给用户，浏览器则会显示网站无法访问的错误页面。
2. 超时： 如果在递归查询过程中某一步出现网络故障或服务器响应超时，本地 DNS 服务器可能无法收到响应。在这种情况下，本地 DNS 服务器通常会进行重试，直到超时次数达到预设值（通常为 2 或 3 次），然后将超时错误返回给用户。
3. 返回 CNAME（别名）记录： 在一些情况下，权威域名服务器可能返回一个 CNAME 记录，指示域名的真实地址。在这种情况下，本地 DNS 服务器会再次进行域名解析，直到找到最终的 IP 地址。

无论是哪种情况，如果 DNS 解析失败，用户通常会看到浏览器显示的类似于“无法访问此网站”的错误提示。解决这种问题的方法通常是等待一段时间重试，或者尝试通过其他手段（例如使用 VPN、更换 DNS 服务器等）来解决网络问题。


## 墙

> “墙”通常指的是由政府实施的互联网审查和防火墙系统，俗称“防火长城”。这个系统由多个层级的技术和政策措施组成，旨在监控、过滤和限制互联网上的信息流动，以实现对互联网内容的审查和控制。

以下是该系统的一些主要实现方式：

1. DNS 污染和劫持： 政府通过劫持 DNS 查询来实施对特定网站域名的解析，将用户访问的域名转向被审查或屏蔽的页面，或者直接返回错误的 IP 地址，导致用户无法正常访问目标网站。
2. IP 封锁： 政府通过防火墙系统封锁了一些被认为敏感或违法的网站的 IP 地址，使得用户无法直接通过 IP 地址访问这些网站。
3. URL 关键词过滤： 政府在网络中部署了关键词过滤系统，对用户访问的 URL 进行关键词匹配和过滤，一旦发现包含敏感词汇的 URL 请求，就会直接屏蔽或重定向到其他页面。
4. 深度封包检测（DPI）： 政府使用深度封包检测技术对网络流量进行检测和分析，以识别和阻止不符合政策的网络通信和数据传输，包括屏蔽虚拟专用网络（VPN）和使用加密通信的工具。
5. 屏蔽外部网站： 政府屏蔽了一些国外网站，包括社交媒体平台（如 Facebook、Twitter）、新闻网站和翻墙工具的官方网站，使得用户无法直接访问这些网站。
6. 网络监控和审查： 政府对互联网上的内容进行严格的监控和审查，设立了专门的机构和人员负责对发布在网络上的信息进行审核和删除，以确保内容符合国家法律法规和政府政策。


## VPN

> VPN（Virtual Private Network，虚拟私人网络）可以帮助用户在互联网上建立一个安全的加密通道，通过将用户的网络流量通过加密隧道传输到 VPN 服务器，然后再由 VPN 服务器转发到目标网站，从而实现用户的网络通信和数据传输。通过使用 VPN，用户可以隐藏自己的真实 IP 地址，绕过地理限制和网络审查，访问被封锁的网站和服务。


1. 加密通信： VPN 使用加密技术对用户的网络流量进行加密，在传输过程中防止了网络运营商或政府机构对用户通信的监听和审查，从而有效地绕过了网络审查。
2. 隐藏 IP 地址： VPN 服务器会为用户分配一个虚拟 IP 地址，而不是用户真实的 IP 地址，这样用户的真实身份和位置就被隐藏起来，使得用户可以绕过地理限制和 IP 封锁。
3. 服务器选择： 用户可以通过选择不同地区的 VPN 服务器来获取不同地区的 IP 地址，从而绕过地理限制和网络封锁。如果某个地区的 VPN 服务器被屏蔽或限制，用户可以切换到其他地区的服务器。
4. 隧道加密： VPN 建立了一个加密隧道，将用户的网络流量转发到 VPN 服务器，然后再由 VPN 服务器转发到目标网站，这样使得用户的网络流量在传输过程中得到了保护和加密，从而绕过了网络审查。
5. 防火墙规避： 一些先进的 VPN 服务商会采用各种技术来规避防火墙的检测，包括使用不断变化的 IP 地址、使用深度封包检测（DPI）规避技术等，以确保 VPN 服务的稳定和可用性。







